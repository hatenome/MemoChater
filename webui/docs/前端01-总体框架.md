# MemoChater WebUI - æ€»ä½“æ¡†æ¶

> åŸºäº Vue 3 + TypeScript æ„å»ºçš„ Web ç®¡ç†ç•Œé¢
> é¡¹ç›®è·¯å¾„ï¼š`G:\MemoChater\webui`

## ä¸€ã€é¡¹ç›®å®šä½

MemoChater WebUI æ˜¯ MemoChater åç«¯çš„ Web ç®¡ç†ç•Œé¢ï¼Œæä¾›ï¼š

- ğŸ¤– **åŠ©æ‰‹ç®¡ç†** - åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ AI åŠ©æ‰‹ï¼ˆå«å®Œæ•´æ¨¡å‹é…ç½®ï¼‰
- âš™ï¸ **æµæ°´çº¿é…ç½®** - å¯è§†åŒ–é…ç½®æ¯ä¸ªåŠ©æ‰‹çš„å¤„ç†å™¨æµæ°´çº¿ï¼ˆåŠ¨æ€è·å–å¤„ç†å™¨åˆ—è¡¨ï¼‰
- ğŸ’¬ **å¯¹è¯ç•Œé¢** - ä¸åŠ©æ‰‹è¿›è¡Œæµå¼å¯¹è¯
- ğŸ“ **è¯é¢˜ç®¡ç†** - ç®¡ç†å¯¹è¯è¯é¢˜å’Œå†å²è®°å½•ï¼ˆæ”¯æŒæ™®é€š/è®°å¿†è¯é¢˜ï¼‰
- âœï¸ **æ¶ˆæ¯æ“ä½œ** - ç¼–è¾‘ã€åˆ é™¤æ¶ˆæ¯ï¼Œåˆ›å»ºåˆ†æ”¯è¯é¢˜
- ğŸ§  **è®°å¿†ç®¡ç†** - æŸ¥çœ‹ã€æœç´¢ã€åˆ›å»ºé•¿æœŸè®°å¿†
- ğŸ“‹ **å¾…å¤„ç†æ± ** - ç®¡ç†å¾…å¤„ç†çš„è®°å¿†æ¡ç›®

## äºŒã€æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
|------|----------|------|
| æ¡†æ¶ | Vue 3 | Composition API |
| è¯­è¨€ | TypeScript | ç±»å‹å®‰å…¨ |
| çŠ¶æ€ç®¡ç† | Pinia | Vue å®˜æ–¹æ¨è |
| è·¯ç”± | Vue Router 4 | SPA è·¯ç”± |
| æ ·å¼ | TailwindCSS 3 | åŸå­åŒ– CSS |
| æ„å»ºå·¥å…· | Vite 5 | å¿«é€Ÿå¼€å‘ä½“éªŒ |
| HTTP | Fetch API | åŸç”Ÿæ”¯æŒ |

## ä¸‰ã€æ ¸å¿ƒåŠŸèƒ½

### 3.1 å¯¹è¯åŠŸèƒ½
- æµå¼å“åº”æ˜¾ç¤ºï¼ˆSSEï¼‰
- æ¶ˆæ¯æ°”æ³¡å±•ç¤º
- è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
- æ”¯æŒ Shift+Enter æ¢è¡Œ
- ä¼ é€’ assistant_id å’Œ topic_id åˆ°åç«¯
- **æ¶ˆæ¯ç¼–è¾‘** - ç‚¹å‡»ç¼–è¾‘æŒ‰é’®ä¿®æ”¹æ¶ˆæ¯å†…å®¹
- **æ¶ˆæ¯åˆ é™¤** - ç‚¹å‡»åˆ é™¤æŒ‰é’®ç§»é™¤æ¶ˆæ¯
- **åˆ›å»ºåˆ†æ”¯** - ä»æŒ‡å®šæ¶ˆæ¯ä½ç½®æˆªæ–­åˆ›å»ºæ–°è¯é¢˜

### 3.2 åŠ©æ‰‹ç®¡ç†
- åŠ©æ‰‹åˆ—è¡¨å±•ç¤º
- åˆ›å»º/ç¼–è¾‘åŠ©æ‰‹é…ç½®
- **å®Œæ•´æ¨¡å‹é…ç½®** â­
  - ä¸»æ¨¡å‹ï¼ˆå¯¹è¯ï¼‰
  - å¤„ç†æ¨¡å‹ï¼ˆè®°å¿†å¤„ç†ï¼‰
  - æå–æ¨¡å‹ï¼ˆä¿¡æ¯æå–ï¼‰
  - Embedding æ¨¡å‹ï¼ˆå‘é‡åŒ–ï¼‰
- **åŠ¨æ€æ¨¡å‹åˆ—è¡¨**ï¼ˆä» `/admin/api/models` è·å–ï¼‰
- ç³»ç»Ÿæç¤ºè¯é…ç½®
- è®°å¿†å‚æ•°é…ç½®ï¼ˆæ£€ç´¢æ•°é‡ã€ç›¸å…³æ€§é˜ˆå€¼ï¼‰
- åˆ é™¤åŠ©æ‰‹

### 3.3 æµæ°´çº¿é…ç½® â­ æ–°å¢
- **åŠ¨æ€å¤„ç†å™¨åˆ—è¡¨**ï¼ˆä» `/admin/api/processors` è·å–ï¼‰
- 5ä¸ªå¤„ç†æ—¶æœºçš„å¯è§†åŒ–é…ç½®
- æ¯ä¸ªå¤„ç†å™¨æ¡ç›®åŒ…å«ï¼šåç§°ä¸‹æ‹‰æ¡† + æè¿°è¾“å…¥æ¡†
- æ”¯æŒæ·»åŠ /åˆ é™¤/ä¸Šç§»/ä¸‹ç§»å¤„ç†å™¨
- é…ç½®æŒä¹…åŒ–åˆ°åŠ©æ‰‹é…ç½®æ–‡ä»¶

### 3.4 è¯é¢˜ç®¡ç†
- **è¯é¢˜ç±»å‹åˆ†ç¦»** - æ™®é€šè¯é¢˜ä¸è®°å¿†è¯é¢˜
- ä¾§è¾¹æ åˆ†ç»„æ˜¾ç¤ºä¸¤ç§è¯é¢˜
- æ™®é€šè¯é¢˜ï¼šçº¯å¯¹è¯ï¼Œè·³è¿‡è®°å¿†å¤„ç†å™¨
- è®°å¿†è¯é¢˜ï¼šæ‰§è¡Œå®Œæ•´æµæ°´çº¿ï¼ˆç»¿è‰²ä¸»é¢˜ï¼‰
- å¿«é€Ÿåˆ›å»ºè¯é¢˜ï¼ˆé€‰æ‹©ç±»å‹ï¼‰
- è¯é¢˜åˆ‡æ¢
- è¯é¢˜åˆ é™¤åŠŸèƒ½
- å¯¹è¯å†å²åŠ è½½

### 3.5 è®°å¿†ç®¡ç†
- **æŒ‰åŠ©æ‰‹éš”ç¦»** - æ¯ä¸ªåŠ©æ‰‹æœ‰ç‹¬ç«‹çš„è®°å¿†å­˜å‚¨
- è¯­ä¹‰æœç´¢è®°å¿†
- åˆ†ç±»è¿‡æ»¤
- åˆ›å»ºæ–°è®°å¿†
- å¾…å¤„ç†æ± ç®¡ç†

## å››ã€é¡µé¢ç»“æ„

| è·¯ç”± | é¡µé¢ | åŠŸèƒ½ |
|------|------|------|
| `/chat` | ChatView | å¯¹è¯ä¸»ç•Œé¢ |
| `/chat/:assistantId` | ChatView | é€‰ä¸­åŠ©æ‰‹ |
| `/chat/:assistantId/:topicId` | ChatView | é€‰ä¸­è¯é¢˜ |
| `/assistants` | AssistantsView | åŠ©æ‰‹ç®¡ç†ï¼ˆå«æµæ°´çº¿é…ç½®å¼¹çª—ï¼‰ |
| `/memory/:assistantId` | MemoryView | è®°å¿†ç®¡ç†ï¼ˆæŒ‰åŠ©æ‰‹éš”ç¦»ï¼‰ |
| `/settings` | SettingsView | è®¾ç½®é¡µé¢ |

## äº”ã€ä¸åç«¯äº¤äº’

### API ä»£ç†é…ç½®

å¼€å‘æ¨¡å¼ä¸‹ï¼ŒVite å°† `/api` å‰ç¼€çš„è¯·æ±‚ä»£ç†åˆ°åç«¯ï¼š

```typescript
// vite.config.ts
server: {
  proxy: {
    '/api': {
      target: 'http://localhost:7892',
      changeOrigin: true,
      rewrite: (path) => path.replace(/^\/api/, '')
    }
  }
}
```

### è¯·æ±‚æ˜ å°„

| å‰ç«¯è¯·æ±‚ | å®é™…è¯·æ±‚ |
|----------|----------|
| `/api/assistants` | `http://localhost:7892/assistants` |
| `/api/v1/chat/completions` | `http://localhost:7892/v1/chat/completions` |
| `/api/assistants/:id/memories` | `http://localhost:7892/assistants/:id/memories` |
| `/api/admin/api/models` | `http://localhost:7892/admin/api/models` |
| `/api/admin/api/processors` | `http://localhost:7892/admin/api/processors` â­ |

### Chat API è¯·æ±‚æ ¼å¼

```typescript
interface ChatCompletionRequest {
  model: string
  messages: { role: string; content: string }[]
  stream?: boolean
  temperature?: number
  max_tokens?: number
  assistant_id?: string  // ç”¨äºè®°å¿†éš”ç¦»å’Œæµæ°´çº¿é…ç½®
  topic_id?: string      // ç”¨äºä¼šè¯éš”ç¦»å’Œå†å²æŒä¹…åŒ–
}
```

## å…­ã€æ¨¡å‹é…ç½®è¯´æ˜

åŠ©æ‰‹ç¼–è¾‘å¼¹çª—æ”¯æŒé…ç½®å››ç§æ¨¡å‹ï¼š

| é…ç½®å­—æ®µ | ç”¨é€” | è¯´æ˜ |
|----------|------|------|
| ä¸»æ¨¡å‹ | å¯¹è¯ç”Ÿæˆ | ç”¨æˆ·å‘é€æ¶ˆæ¯åç”Ÿæˆå›å¤ |
| å¤„ç†æ¨¡å‹ | è®°å¿†å¤„ç† | 2å·AIåˆ†æå¯¹è¯æå–ä¿¡æ¯ |
| Embeddingæ¨¡å‹ | å‘é‡åŒ– | è®°å¿†å­˜å‚¨å’Œæ£€ç´¢æ—¶ä½¿ç”¨ |
| æå–æ¨¡å‹ | ä¿¡æ¯æå– | ä»å†å²å¯¹è¯æå–ç»“æ„åŒ–è®°å¿† |

**æ³¨æ„ï¼š** ä¸åŒåŠ©æ‰‹å¯ä»¥ä½¿ç”¨ä¸åŒçš„æ¨¡å‹é…ç½®ï¼ŒåŒ…æ‹¬ä¸åŒçš„ embedding æ¨¡å‹ã€‚

## ä¸ƒã€æµæ°´çº¿é…ç½®è¯´æ˜ â­ æ–°å¢

### 7.1 å¤„ç†å™¨åˆ—è¡¨ï¼ˆåŠ¨æ€è·å–ï¼‰

ä»åç«¯ `/admin/api/processors` è·å–å·²æ³¨å†Œçš„å¤„ç†å™¨ï¼š

| å¤„ç†å™¨ | requires_memory | èŒè´£ |
|--------|-----------------|------|
| HistorySimplifier | true | ç®€åŒ–/å‹ç¼©å†å²å¯¹è¯ |
| MemoryAssembler | true | æ£€ç´¢å¹¶è£…é…é•¿æœŸè®°å¿† |
| SubconsciousProcessor | true | æ½œæ„è¯†å±‚é¢åˆ†æ |
| ContentChunker | true | å†…å®¹åˆ‡å— |
| MemoryCommitter | true | æäº¤è®°å¿†åˆ°å­˜å‚¨ |

### 7.2 å¤„ç†æ—¶æœº

| æ—¶æœº | è¯´æ˜ | æ‰§è¡Œæ–¹å¼ |
|------|------|----------|
| on_user_message | ç”¨æˆ·å‘è¨€åæ‰§è¡Œ | åŒæ­¥ |
| before_ai_call | AIè°ƒç”¨å‰æ‰§è¡Œï¼ˆé¢„ç•™ï¼‰ | åŒæ­¥ |
| on_stream_start | æµå¼å¼€å§‹æ—¶æ‰§è¡Œï¼ˆé¢„ç•™ï¼‰ | åŒæ­¥ |
| on_stream_chunk | æ”¶åˆ°chunkæ—¶æ‰§è¡Œï¼ˆé¢„ç•™ï¼‰ | åŒæ­¥ |
| after_ai_response | AIå“åº”åæ‰§è¡Œ | åŒæ­¥ï¼Œé˜»å¡ä¸‹ä¸€æ¬¡å¯¹è¯ |
| **background_process** | åŒæ­¥å¤„ç†å®Œæˆåæ‰§è¡Œ | **å¼‚æ­¥ï¼Œä¸é˜»å¡ä¸‹ä¸€æ¬¡å¯¹è¯** â­ |

### 7.3 è¯é¢˜ç±»å‹ä¸å¤„ç†å™¨

- **æ™®é€šè¯é¢˜**ï¼šè·³è¿‡æ‰€æœ‰ `requires_memory=true` çš„å¤„ç†å™¨
- **è®°å¿†è¯é¢˜**ï¼šæ‰§è¡Œå®Œæ•´æµæ°´çº¿

## å…«ã€å¯åŠ¨æ–¹å¼

### å¼€å‘æ¨¡å¼

```bash
cd G:\MemoChater\webui
npm install
npm run dev
```

è®¿é—® http://localhost:5173

### ç”Ÿäº§æ„å»º

```bash
npm run build
```

æ„å»ºäº§ç‰©è¾“å‡ºåˆ° `dist/` ç›®å½•ã€‚

## ä¹ã€ä¾èµ–æœåŠ¡

| æœåŠ¡ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| MemoChater åç«¯ | http://localhost:7892 | å¿…éœ€ |